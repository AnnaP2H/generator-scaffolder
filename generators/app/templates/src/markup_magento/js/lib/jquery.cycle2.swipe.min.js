/*! Plugin for Cycle2; Copyright (c) 2012 M. Alsup; ver: 20121120 */
(function(a) {
  const b = 'ontouchend' in document;
  (a.event.special.swipe = a.event.special.swipe || {
    scrollSupressionThreshold: 10,
    durationThreshold: 1e3,
    horizontalDistanceThreshold: 30,
    verticalDistanceThreshold: 75,
    setup() {
      const b = a(this);
      b.bind('touchstart', c => {
        function g(b) {
          if (!f) return;
          const c = b.originalEvent.touches ? b.originalEvent.touches[0] : b;
          (e = { time: new Date().getTime(), coords: [c.pageX, c.pageY] }),
            Math.abs(f.coords[0] - e.coords[0]) > a.event.special.swipe.scrollSupressionThreshold && b.preventDefault();
        }
        const d = c.originalEvent.touches ? c.originalEvent.touches[0] : c;

        let e;

        var f = { time: new Date().getTime(), coords: [d.pageX, d.pageY], origin: a(c.target) };
        b.bind('touchmove', g).one('touchend', c => {
          b.unbind('touchmove', g),
            f &&
              e &&
              e.time - f.time < a.event.special.swipe.durationThreshold &&
              Math.abs(f.coords[0] - e.coords[0]) > a.event.special.swipe.horizontalDistanceThreshold &&
              Math.abs(f.coords[1] - e.coords[1]) < a.event.special.swipe.verticalDistanceThreshold &&
              f.origin.trigger('swipe').trigger(f.coords[0] > e.coords[0] ? 'swipeleft' : 'swiperight'),
            (f = e = undefined);
        });
      });
    }
  }),
    (a.event.special.swipeleft = a.event.special.swipeleft || {
      setup() {
        a(this).bind('swipe', a.noop);
      }
    }),
    (a.event.special.swiperight = a.event.special.swiperight || a.event.special.swipeleft);
})(jQuery);
